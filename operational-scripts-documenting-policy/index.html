
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://azure.github.io/enterprise-azure-policy-as-code/operational-scripts-documenting-policy/">
      
      
        <link rel="prev" href="../operational-scripts/">
      
      
        <link rel="next" href="../operational-scripts-reference/">
      
      
        
      
      
      <link rel="icon" href="../Images/epac_svg.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Documenting Policy - Enterprise Policy As Code (EPAC)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documenting-policy-assignments-and-sets-of-policy-set-initiative-definitions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-header__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/epac_svg.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Enterprise Policy As Code (EPAC)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Documenting Policy
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../start-implementing/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../settings-global-setting-file/" class="md-tabs__link">
          
  
  
    
  
  Settings and Desired State

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../integrating-with-alz-overview/" class="md-tabs__link">
          
  
  
    
  
  Azure Landing Zones

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../policy-definitions/" class="md-tabs__link">
          
  
  
    
  
  Define Policy Resources

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../ci-cd-overview/" class="md-tabs__link">
          
  
  
    
  
  CI/CD Integration

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../operational-scripts/" class="md-tabs__link">
          
  
  
    
  
  Operational Scripts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../guidance-remediation/" class="md-tabs__link">
          
  
  
    
  
  Operator Guidance

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-nav__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/epac_svg.svg" alt="logo">

    </a>
    Enterprise Policy As Code (EPAC)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-implementing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview and Prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-hydration-kit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hydration Kit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-extracting-policy-resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extracting Policy Resources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-forking-github-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forking GitHub Repo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changes in v11.0.0
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging EPAC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Settings and Desired State
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Settings and Desired State
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-global-setting-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Global Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-desired-state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Desired State
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-dfc-assignments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DfC Assignments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-output-themes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Output Themes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Azure Landing Zones
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Azure Landing Zones
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-alz-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ALZ Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-alz-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ALZ Policy Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Define Policy Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Define Policy Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Definitions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-set-definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Set Definitions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-assignments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Assignment Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-assignments-csv-parameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSV Assignment Parameters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-exemptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Exemptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CI/CD Integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    CI/CD Integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-app-registrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    App Registrations Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-branching-flows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Branching Flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-ado-pipelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure DevOps Pipelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-github-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Operational Scripts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operational Scripts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripts Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Documenting Policy
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Documenting Policy
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        JSON Schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JSON Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Defaults
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-all-assignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document All Assignments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-chosen-environment-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document chosen 'Environment Categories'
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automating-azure-devops-wiki-markdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automating Azure DevOps Wiki Markdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automating Azure DevOps Wiki Markdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#personal-access-token-pat" class="md-nav__link">
    <span class="md-ellipsis">
      
        Personal Access Token (PAT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-principal-spn" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Principal (SPN)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-markdown-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modifying the Markdown Output
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modifying the Markdown Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-devops-wiki-markdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Azure DevOps Wiki Markdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-html-in-markdown-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embedded HTML in Markdown Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improve-markdown-readability" class="md-nav__link">
    <span class="md-ellipsis">
      
        Improve Markdown Readability
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assignment Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Assignment Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-element-documentallassignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        OPTION 1: Element documentAllAssignments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-documentationspecifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentationSpecifications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-element-environmentcategories" class="md-nav__link">
    <span class="md-ellipsis">
      
        OPTION 2: Element environmentCategories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-documentationspecifications_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentationSpecifications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-set-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy Set Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy Set Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#element-documentpolicysets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentPolicySets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-files_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operator Guidance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operator Guidance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guidance-remediation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remediation Enforcement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guidance-scope-exclusions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exclusion Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guidance-exemptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemption Updates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guidance-lighthouse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lighhouse Subscription Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        JSON Schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JSON Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Defaults
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-all-assignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document All Assignments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-chosen-environment-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document chosen 'Environment Categories'
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automating-azure-devops-wiki-markdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automating Azure DevOps Wiki Markdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automating Azure DevOps Wiki Markdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#personal-access-token-pat" class="md-nav__link">
    <span class="md-ellipsis">
      
        Personal Access Token (PAT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-principal-spn" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Principal (SPN)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-markdown-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modifying the Markdown Output
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modifying the Markdown Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-devops-wiki-markdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Azure DevOps Wiki Markdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-html-in-markdown-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embedded HTML in Markdown Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improve-markdown-readability" class="md-nav__link">
    <span class="md-ellipsis">
      
        Improve Markdown Readability
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assignment Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Assignment Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-element-documentallassignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        OPTION 1: Element documentAllAssignments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-documentationspecifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentationSpecifications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-element-environmentcategories" class="md-nav__link">
    <span class="md-ellipsis">
      
        OPTION 2: Element environmentCategories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-documentationspecifications_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentationSpecifications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-set-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy Set Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy Set Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#element-documentpolicysets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Element documentPolicySets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-files_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="documenting-policy-assignments-and-sets-of-policy-set-initiative-definitions">Documenting Policy Assignments and Sets of Policy Set (Initiative) definitions</h1>
<div style="margin: 30px 0; position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; height: auto;">
  <iframe src="https://www.youtube.com/embed/Xg-O18AgSkU" 
          style="position: absolute; top:0; left:0; width:100%; height:100%;" 
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
  </iframe>
</div>

<h2 id="overview">Overview</h2>
<p>The Documentation feature provides reports on Policy Assignments deployed within an environment, and comparisons of Policy Assignments and Sets of Policy Set definitions for considering differences in policies and effects.  Output is generated as Markdown (<code>.md</code>), and Excel (<code>.csv</code>) files using the script <a href="../operational-scripts-reference/#script-build-policydocumentation"><code>./Scripts/Operations/Build-PolicyDocumentation</code></a> It retrieves its instruction from the JSON files in this folder; the names of the definition JSON files don't matter as the script reads any file in the folder with a <code>.json</code> or <code>.jsonc</code> extension.</p>
<ul>
<li>Policy Assignments: Read and process Policy Assignments which are representative of an environment category, such as prod, test, dev, and sandbox. It generates Markdown (<code>.md</code>), and Excel (<code>.csv</code>) files.</li>
<li>Policy Sets: Read and process Policy Sets to compare them for Policy and effect overlap. It generates Markdown (<code>.md</code>), Excel (<code>.csv</code>) files, and JSON file (<code>.jsonc</code>).</li>
</ul>
<h2 id="json-schema">JSON Schema</h2>
<p>The GitHub repo contains a JSON schema which can be used in tools such as <a href="https://code.visualstudio.com/Docs/languages/json#_json-schemas-and-settings">VS Code</a> to provide code completion.</p>
<p>To utilize the schema add a <code>$schema</code> tag to the JSON file.</p>
<div class="highlight"><pre><span></span><code>{
  &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-documentation-schema.json&quot;
}
</code></pre></div>
<p>This schema is new in v7.4.x and may not be complete. Please let us know if we missed anything.</p>
<h3 id="global-defaults">Global Defaults</h3>
<p>You can define shared defaults once at the top level using <code>globalDocumentationSpecifications</code>. These values apply to both assignment and policy set outputs unless overridden in a specific <code>documentationSpecifications</code> entry or <code>documentPolicySets</code> item.</p>
<ul>
<li>Supported properties:<ul>
<li><code>fileNameStem</code>, <code>title</code> (used to synthesize documentation when <code>documentAssignments</code> omits <code>documentationSpecifications</code>)</li>
<li><code>markdownAddToc</code>, <code>markdownAdoWiki</code>, <code>markdownAdoWikiConfig</code></li>
<li><code>markdownNoEmbeddedHtml</code>, <code>markdownIncludeComplianceGroupNames</code></li>
<li><code>markdownSuppressParameterSection</code>, <code>markdownMaxParameterLength</code></li>
</ul>
</li>
</ul>
<p>Specific entries take precedence. If a property is set in <code>documentAssignments.documentationSpecifications[...]</code> or in a <code>documentPolicySets[...]</code> item, it overrides the global value.</p>
<p>If <code>documentAssignments</code> uses <code>documentAllAssignments</code> and omits <code>documentationSpecifications</code>, you must provide <code>fileNameStem</code> and <code>title</code> in <code>globalDocumentationSpecifications</code>. The script will synthesize a single documentation specification using the discovered environment categories and the global defaults.</p>
<h2 id="examples">Examples</h2>
<p>The following are 2 examples which are both valid. Both are presented and should be used based on requirements and preference.</p>
<h3 id="document-all-assignments">Document All Assignments</h3>
<p>Each file must contain one or both documentation topics, <a href="#assignment-documentation"><code>documentAssignments</code></a> and/or <a href="#policy-set-documentation"><code>documentPolicySets</code></a>. This example file in the StarterKit has both topics. The element <code>pacEnvironment</code> references the Policy as Code environment in <code>global-settings.jsonc</code> defining the tenant and root scope where the custom Policies and Policy Sets are deployed.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-documentation-schema.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;documentAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;documentAllAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EPAC-Prod&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;fileNameStemPrefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Production&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;skipPolicyAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                </span><span class="nt">&quot;skipPolicyDefinitions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;/providers/microsoft.authorization/policysetdefinitions/1f3afdf9-d0c9-4c3d-847f-89da613e70a8&quot;</span><span class="w"> </span><span class="c1">// Azure Security Benchmark v3</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;overrideEnvironmentCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;DEV&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// Any name will suffice - will be header of column, grouping the scopes within the array</span>
<span class="w">                        </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/DEV-1&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/DEV-2&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;PROD&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/PROD-1&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/PROD-2&quot;</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;documentationSpecifications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;fileNameStem&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;contoso-policy-effects-across-environments&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;environmentCategories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// when using &#39;documentAllAssignments&#39;, this value will be overwritten</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Contoso Policy effects&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;markdownAdoWiki&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;markdownIncludeComplianceGroupNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;markdownSuppressParameterSection&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;markdownMaxParameterLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="c1">//default is 42</span>
<span class="w">                </span><span class="nt">&quot;markdownAdoWikiConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;adoOrganization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyOrganization&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;adoProject&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EPAC&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;adoWiki&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EPAC&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;documentPolicySets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;fileNameStem&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;contoso-compliance-policy-sets&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Document interesting Policy Sets&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;policySets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASB&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/1f3afdf9-d0c9-4c3d-847f-89da613e70a8&quot;</span><span class="w"> </span><span class="c1">// Azure Security Benchmark v3</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NIST 800-171&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/03055927-78bd-4236-86c0-f36125a10dc9&quot;</span><span class="w"> </span><span class="c1">// NIST SP 800-171 Rev. 2</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NIST 800-53&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/179d1daa-458f-4e47-8086-2a68d0d6c38f&quot;</span><span class="w"> </span><span class="c1">// NIST SP 800-53 Rev. 5</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORG&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Root/providers/Microsoft.Authorization/policySetDefinitions/org-security-benchmark&quot;</span><span class="w"> </span><span class="c1">// Organization Security Benchmark for Custom Policies</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;environmentColumnsInCsv&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;prod&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;lab&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="document-chosen-environment-categories">Document chosen 'Environment Categories'</h3>
<p>Each file must contain one or both documentation topics, <a href="#assignment-documentation"><code>documentAssignments</code></a> and/or <a href="#policy-set-documentation"><code>documentPolicySets</code></a>. This example file in the StarterKit has both topics. The element <code>pacEnvironment</code> references the Policy as Code environment in <code>global-settings.jsonc</code> defining the tenant and root scope where the custom Policies and Policy Sets are deployed.</p>
<ul>
<li><a href="#assignment-documentation"><code>documentAssignments</code></a></li>
<li><a href="#policy-set-documentation"><code>documentPolicySets</code></a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-documentation-schema.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;documentAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;environmentCategories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;environmentCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prod&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;scopes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// Used in Markdown output only</span>
<span class="w">                    </span><span class="s2">&quot;Management Groups: Contoso-Prod&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;representativeAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASB&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Prod/providers/Microsoft.Authorization/policyAssignments/prod-asb&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORG&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Prod/providers/Microsoft.Authorization/policyAssignments/prod-org&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;environmentCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;scopes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// Used in Markdown output only</span>
<span class="w">                    </span><span class="s2">&quot;Management Groups: Contoso-NonProd&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;representativeAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASB&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-NonProd/providers/Microsoft.Authorization/policyAssignments/prod-asb&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORG&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-NonProd/providers/Microsoft.Authorization/policyAssignments/prod-org&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;environmentCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;scopes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// Used in Markdown output only</span>
<span class="w">                    </span><span class="s2">&quot;Management Groups: Contoso-Dev&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;representativeAssignments&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASB&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Dev/providers/Microsoft.Authorization/policyAssignments/prod-asb&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORG&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Dev/providers/Microsoft.Authorization/policyAssignments/prod-org&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;documentationSpecifications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;fileNameStem&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;contoso-policy-effects-across-environments&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;environmentCategories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;prod&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;dev&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Contoso Policy effects&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;markdownAdoWiki&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;markdownIncludeComplianceGroupNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;markdownSuppressParameterSection&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;markdownMaxParameterLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="c1">//default is 42</span>
<span class="w">            </span><span class="nt">&quot;markdownAdoWikiConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;adoOrganization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyOrganization&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;adoProject&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EPAC&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;adoWiki&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EPAC&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;documentPolicySets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;pacEnvironment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;fileNameStem&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;contoso-compliance-policy-sets&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Document interesting Policy Sets&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;policySets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASB&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/1f3afdf9-d0c9-4c3d-847f-89da613e70a8&quot;</span><span class="w"> </span><span class="c1">// Azure Security Benchmark v3</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NIST 800-171&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/03055927-78bd-4236-86c0-f36125a10dc9&quot;</span><span class="w"> </span><span class="c1">// NIST SP 800-171 Rev. 2</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NIST 800-53&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Authorization/policySetDefinitions/179d1daa-458f-4e47-8086-2a68d0d6c38f&quot;</span><span class="w"> </span><span class="c1">// NIST SP 800-53 Rev. 5</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;shortName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORG&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/providers/Microsoft.Management/managementGroups/Contoso-Root/providers/Microsoft.Authorization/policySetDefinitions/org-security-benchmark&quot;</span><span class="w"> </span><span class="c1">// Organization Security Benchmark for Custom Policies</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;environmentColumnsInCsv&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;prod&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;lab&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="automating-azure-devops-wiki-markdown">Automating Azure DevOps Wiki Markdown</h2>
<ul>
<li>
<p>EPAC can be used to automate the population of your Azure DevOps Wiki pages with the generated markdown files. To do this, you must call "Build-PolicyDocumentation" with the parameter either the "WikiSPN" or "WikiClonePat". </p>
</li>
<li>
<p>To ensure your EPAC reaches your Wiki, you must configure the "markdownAdoWikiConfig" property within your policy documentation file.</p>
<ul>
<li><strong>adoOrganization</strong>: Name of your ADO Organization</li>
<li><strong>adoProject</strong>: Name of your ADO Project</li>
<li><strong>adoWiki</strong>: Name of your Wiki (If Wiki was not manually set up, it will be created for you based on the name given here)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code>&quot;markdownAdoWikiConfig&quot;: [
                    {
                        &quot;adoOrganization&quot;: &quot;MyOrganization&quot;,
                        &quot;adoProject&quot;: &quot;EPAC&quot;,
                        &quot;adoWiki&quot;: &quot;EPAC&quot;
                    }
                ]
</code></pre></div>
<p>To avoid repeating the same Azure DevOps Wiki configuration in every specification, set <code>markdownAdoWiki</code> and <code>markdownAdoWikiConfig</code> once under <code>globalDocumentationSpecifications</code>. Both assignment and policy set documentation entries inherit these values unless they explicitly override them.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;globalDocumentationSpecifications&quot;: {
        &quot;fileNameStem&quot;: &quot;Azure-Policy-Assignments&quot;,
        &quot;title&quot;: &quot;Current list of Azure Policies deployed&quot;,
        &quot;markdownAdoWiki&quot;: true,
        &quot;markdownAdoWikiConfig&quot;: [
            {
                &quot;adoOrganization&quot;: &quot;MyOrganization&quot;,
                &quot;adoProject&quot;: &quot;EPAC&quot;,
                &quot;adoWiki&quot;: &quot;EPAC&quot;
            }
        ]
    }
}
</code></pre></div>
<p>You can still override <code>markdownAdoWiki</code> or <code>markdownAdoWikiConfig</code> in a specific <code>documentPolicySets[...]</code> item or inside <code>documentAssignments.documentationSpecifications[...]</code> when needed.</p>
<h3 id="personal-access-token-pat">Personal Access Token (PAT)</h3>
<p>When leveraging a Personal Access Token to push to the ADO Project Wiki, the parameter's value should be the name of the Personal Access Token (PAT) set in your pipeline variable. Example:</p>
<div class="highlight"><pre><span></span><code>Build-PolicyDocumentation.ps1 -WikiClonePat $(WikiClonePat)
</code></pre></div>
<ul>
<li>This PAT only requires "Read &amp; write" permissions for "Code", as it will modify and push these markdown files to your Wiki. For more information, please see <a href="https://learn.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&amp;tabs=Windows">"Azure DevOps: Use personal access tokens"</a></li>
</ul>
<h3 id="service-principal-spn">Service Principal (SPN)</h3>
<p>You can push to Azure DevOps Wiki using a Service Principal by passing <code>-WikiSPN</code> to <code>Build-PolicyDocumentation.ps1</code>. The script acquires an Azure DevOps bearer token via <code>Get-AzAccessToken</code> for resource <code>499b84ac-1321-427f-aa17-267ca6975798</code> and uses it for <code>git clone</code>/<code>git push</code> to the Wiki repo.</p>
<div class="highlight"><pre><span></span><code>Build-PolicyDocumentation.ps1 -WikiSPN
</code></pre></div>
<ul>
<li>
<p><strong>Prerequisites</strong>:</p>
<ul>
<li>Azure DevOps organization is connected to your Microsoft Entra ID tenant used by the Service Principal.</li>
<li>The Service Principal is added to the Azure DevOps organization and granted access to the target project.<ul>
<li>Organization settings &gt; Users &gt; Add &gt; Service principals (or add by Application ID).</li>
<li>Grant project access (Project settings &gt; Permissions) and repository permissions for the Wiki repo.</li>
</ul>
</li>
<li>Repository permissions on the Wiki Git repo (<code>{adoWiki}.wiki</code>): Allow at least "Contribute" (and typically "Create branch").</li>
<li>Pipeline identity logs into Azure prior to running the script (for example with Azure DevOps task <code>AzurePowerShell@5</code> bound to a Service Connection using the SPN).</li>
<li>Outbound network access to <code>https://dev.azure.com/*</code> and <code>git</code> available in the agent.</li>
</ul>
</li>
<li>
<p><strong>Script Usage</strong>:</p>
<ul>
<li>Add <code>markdownAdoWiki: true</code> and <code>markdownAdoWikiConfig</code> (globally or per spec as shown above).</li>
<li>Invoke: <code>Build-PolicyDocumentation.ps1 -PacSelector &lt;your pac selector&gt; -WikiSPN</code>.</li>
</ul>
</li>
</ul>
<p>Minimal Azure DevOps pipeline example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzurePowerShell@5</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">displayName</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build policy documentation  ADO Wiki via SPN</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">inputs</span><span class="p p-Indicator">:</span>
<span class="w">            </span><span class="nt">azureSubscription</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$(ServiceConnectionName)</span><span class="w">   </span><span class="c1"># SPN-based service connection</span>
<span class="w">            </span><span class="nt">ScriptPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Scripts/Operations/Build-PolicyDocumentation.ps1</span>
<span class="w">            </span><span class="nt">ScriptArguments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-PacSelector &lt;your pac selector&gt; -WikiSPN</span>
<span class="w">            </span><span class="nt">azurePowerShellVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LatestVersion</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>SPN must be discoverable:</strong> The SPN must be discoverable in the Azure DevOps organization and have permissions to the <code>{adoWiki}.wiki</code> repository. If the Wiki does not exist, Azure DevOps creates it on first push when permissions allow.</p>
</div>
<ul>
<li>For a full implementation using an example pipeline, please see <a href="https://github.com/Azure/enterprise-azure-policy-as-code/blob/main/StarterKit/Pipelines/AzureDevOps/GitHub-Flow-With-AdoWiki/epac-tenant-pipeline-with-adowiki.yml">"EPAC GitHub: epac-tenant-pipeline-with-adowiki.yml"</a></li>
</ul>
<h2 id="modifying-the-markdown-output">Modifying the Markdown Output</h2>
<p>Markdown processors vary slightly. This script has settings to tune the output to match the Markdown processor you are using.</p>
<h3 id="azure-devops-wiki-markdown">Azure DevOps Wiki Markdown</h3>
<ul>
<li>Some Markdown processors (including Azure DevOps Wikis) recognize <code>[[_TOC_]]</code> to insert a table of contents. Setting to <code>markdownAddToc</code> to <code>true</code> enables generating the table of contents.</li>
<li>Azure DevOps Wikis do not need a heading (title) at level 1. It needs the subheadings at level 1 instead. Setting <code>markdownAdoWiki</code> to true enables formatting the headings for Azure DevOps Wiki and generating the table of contents (implicitly sets <code>markdownAddToc</code> to <code>true</code>).</li>
</ul>
<div class="highlight"><pre><span></span><code>&quot;markdownAddToc&quot;: true, // default is false, set to true to add a table of contents
</code></pre></div>
<div class="highlight"><pre><span></span><code>&quot;markdownAdoWiki&quot;: true, // default is false, set to true to format headings for Azure DevOps Wiki and generate a table of contents
</code></pre></div>
<h3 id="embedded-html-in-markdown-tables">Embedded HTML in Markdown Tables</h3>
<p>EPAC uses embedded HTML to format Markdown tables. Some Markdown processors, such as SharePoint, do not recognize embedded HTML. Setting <code>markdownNoEmbeddedHtml</code> to <code>true</code> emits commas <code>,</code> instead of the HTML tag <code>&lt;br/&gt;</code>.</p>
<div class="highlight"><pre><span></span><code>&quot;markdownNoEmbeddedHtml&quot;: true, // default is false, set to true to remove embedded HTML in Markdown tables
</code></pre></div>
<h3 id="improve-markdown-readability">Improve Markdown Readability</h3>
<p>Policy definition group names are not included in Markdown to reduce clutter. You can include a column by setting <code>markdownIncludeComplianceGroupNames</code> to <code>true</code>,</p>
<div class="highlight"><pre><span></span><code>&quot;markdownIncludeComplianceGroupNames&quot;: true, // default is false, set to true to include compliance group names
</code></pre></div>
<p>In some markdown processors, very long parameter names break the display. You can set <code>markdownSuppressParameterSection</code> to true to completely suppress the parameter section in the Markdown output.</p>
<div class="highlight"><pre><span></span><code>&quot;markdownSuppressParameterSection&quot;: true, // default is false, set to true to suppress the parameter section in the Markdown output
</code></pre></div>
<p>Alternatively, you can set <code>markdownMaxParameterLength</code> to a maximum length. EPAC will truncate the name at that length and append an ellipsis. The default is 42 characters. The minimum is 16 characters.</p>
<div class="highlight"><pre><span></span><code>&quot;markdownMaxParameterLength&quot;: 42, // default is 42
</code></pre></div>
<h2 id="assignment-documentation">Assignment Documentation</h2>
<h3 id="option-1-element-documentallassignments">OPTION 1: Element <code>documentAllAssignments</code></h3>
<p>Best used when <strong>all</strong> Policy Assignments need to be documented.</p>
<p>When enabled, this section lists all Policy Assignments across all scopes where Policy is directly assigned. In many organizations, the same Policies and effects are applied to multiple Management Groups and even Azure tenants with the parameters consistent, therefore there is an option to group scopes by environment category.</p>
<p><code>documentAllAssignments</code> entry specifies:</p>
<ul>
<li><code>pacEnvironment</code>: references the Policy as Code environment in <code>global-settings.jsonc</code> defining the tenant and root scope where the Policies and Policy Sets are deployed.</li>
<li><code>fileNameStemPrefix</code>: add a prefix to the fileNameStem set in "documentationSpecifications". Useful when needing to avoid overwriting files.</li>
<li><code>skipPolicyAssignments</code>: list of Policy Assignment ID's used to define Policy Assignments that do not want to be included in the output.</li>
<li><code>skipPolicyDefinitions</code>: list of Policy Definition and Policy Set ID's used to define Policy Assignments that do not want to be included in the output.</li>
<li><code>overrideEnvironmentCategory</code>: list of custom-defined Environment Categories that will overwrite the auto-generated values. By default, all Policy Assignment scopes are treated as an individual "Environment Category", therefore leverage this section to override these Environment Categories and create custom groupings. (For an example see <a href="#example-documentation-specification-file-using-documentallassignments"><code>Example Documentation Specification File using 'documentAllAssignments'</code></a>)</li>
</ul>
<h3 id="element-documentationspecifications">Element <code>documentationSpecifications</code></h3>
<p>Each entry in the array defines a set of outputs:</p>
<ul>
<li><code>fileNameStem</code>: the file name stem used to construct the filenames.</li>
<li><code>environmentCategories</code> listed as effect columns.</li>
<li><code>title</code>: Heading 1 text for Markdown.</li>
</ul>
<h3 id="option-2-element-environmentcategories">OPTION 2: Element <code>environmentCategories</code></h3>
<p>Best used when specific Policy Assignments need to be documented.</p>
<p>For any given environment category, such as <code>prod</code>, <code>test</code>, <code>dev</code>, this section lists Policy Assignments which are representative of those environments. In many organizations, the same Policies and effects are applied to multiple Management Groups and even Azure tenants with the parameters consistent by environment category.</p>
<p>Each <code>environmentCategories</code> entry specifies:</p>
<ul>
<li><code>pacEnvironment</code>: references the Policy as Code environment in <code>global-settings.jsonc</code> defining the tenant and root scope where the Policies and Policy Sets are deployed.</li>
<li><code>environmentCategory</code>: name used for column headings and referenced in <code>documentationSpecifications</code> below.</li>
<li><code>scopes</code>:  used in Markdown output only for the Scopes section as unprocessed text.</li>
<li><code>representativeAssignments</code>: list Policy Assignment <code>id</code>s representing this <code>environmentCategory</code>. The <code>shortName</code> is used for CSV column headings and markdown output.</li>
</ul>
<h3 id="element-documentationspecifications_1">Element <code>documentationSpecifications</code></h3>
<p>Each entry in the array defines a set of outputs:</p>
<ul>
<li><code>fileNameStem</code>: the file name stem used to construct the filenames.</li>
<li><code>environmentCategories</code> listed as effect columns.</li>
<li><code>title</code>: Heading 1 text for Markdown.</li>
</ul>
<h3 id="output-files">Output files</h3>
<ul>
<li>
<p><code>&lt;fileNameStem&gt;-full.csv</code>: Lists Policies across environments and multiple Policy Sets sorted by <code>category</code> and <code>`displayName</code>.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>name</code></td>
<td style="text-align: left;">Policy name (must be unique - a GUID for built-in Policies)</td>
</tr>
<tr>
<td style="text-align: left;"><code>referencePath</code></td>
<td style="text-align: left;">Disambiguate Policies included multiple times in a Policy Set definition with different <code>referenceId</code>s. It is blank if not needed or formatted as <code>&lt;policy-set.name&gt;\\&lt;referenceId&gt;</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>category</code></td>
<td style="text-align: left;">Policy <code>category</code> from Policy <code>metadata</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>displayName</code></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><code>description</code></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><code>groupNames</code></td>
<td style="text-align: left;">Union of (compliance Policy Sets) <code>groupNames</code> for this Policy.</td>
</tr>
<tr>
<td style="text-align: left;"><code>allowedEffects</code></td>
<td style="text-align: left;">List of allowed Policy <code>effect</code>s. <strong>Note:</strong> Some Policy Sets may have hardcoded the effect which is not represented here.</td>
</tr>
<tr>
<td style="text-align: left;"><code>&lt;environmentCategory&gt;_Effect</code></td>
<td style="text-align: left;">One column per <code>environmentCategory</code> listing the highest enforcement level across the Policy Sets assigned in this environment category.</td>
</tr>
<tr>
<td style="text-align: left;"><code>&lt;environmentCategory&gt;_Parameters</code></td>
<td style="text-align: left;">One column per <code>environmentCategory</code> listing the parameters (JSON - excluding the effect parameter) for this Policy and <code>environmentCategory</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>&lt;environmentCategory&gt;-</code><br/><code>&lt;policy-set-short name&gt;-Effect</code></td>
<td style="text-align: left;">Detailed effect per <code>environmentCategory</code> <strong>and</strong> Policy Set. The next table shows examples of the different patterns for this value. An actual document will reflect the actual value in your environment.</td>
</tr>
<tr>
<td style="text-align: left;"><code>&lt;policy-set-short name&gt;-ParameterDefinitions</code></td>
<td style="text-align: left;">Parameter definitions (JSON) per Policy Set containing this Policy.</td>
</tr>
</tbody>
</table>
<p>Examples of effects:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>Deny (assignment: secretsExpirationSetEffect)</code></td>
<td style="text-align: left;">Effect is <code>Deny</code> specified in a user-defined value for parameter <code>secretsExpirationSetEffect</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>Audit (default: useRbacRulesMonitoringEffect)</code></td>
<td style="text-align: left;">Effect is <code>Audit</code> default value for Policy Set parameter <code>useRbacRulesMonitoringEffect</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>Audit (Initiative Fixed)</code></td>
<td style="text-align: left;">Effect is parameterized in the Policy definition. Policy Set definition is setting it to a fixed value of <code>Audit</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>Audit (Policy Default)</code></td>
<td style="text-align: left;">Effect is parameterized in Policy definition with a default value of <code>Audit</code>. The Policy Set definition does not override or surface this value.</td>
</tr>
<tr>
<td style="text-align: left;"><code>Modify (Policy Fixed)</code></td>
<td style="text-align: left;">Effect is <strong>not</strong> parameterized in Policy definition. It is set to a fixed value of <code>Modify</code>.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>&lt;fileNameStem&gt;-parameters.csv</code>: This file is intended <strong>for a future enhancement</strong> to EPAC which will allow the effect values and parameter values to be specified in a spreadsheet instead of JSON. This file is generated to make it usable as the starting list, or to round-trip the values. It lists Policies across environments and Initiatives sorted by <code>category</code> and <code>`displayName</code>. Columns (see above for descriptions):</p>
</li>
<li>
<p><code>name</code></p>
</li>
<li><code>referencePath</code></li>
<li><code>category</code> (not required to define the parameters - useful for the author of the spreadsheet)</li>
<li><code>displayName</code> (not required to define the parameters - useful for the author of the spreadsheet)</li>
<li><code>description</code> (not required to define the parameters - useful for the author of the spreadsheet)</li>
<li><code>allowedEffects</code> (not required to define the parameters - useful for the author of the spreadsheet)</li>
<li><code>&lt;environmentCategory&gt;_Effect</code></li>
<li>
<p><code>&lt;environmentCategory&gt;_Parameters</code></p>
</li>
<li>
<p><code>&lt;fileNameStem&gt;-summary.md</code>: This Markdown file is intended for developers for a quick overview of the effects and parameters in place for each <code>environmentCategory</code>. It does not provide details about the individual Initiatives assigned. It is equivalent to <code>&lt;fileNameStem&gt;-parameters.csv</code>. The Policies are sorted by <code>category</code> and <code>displayName</code>. Each <code>environmentCategory</code> column shows the current enforcement level in bold. If the value is fixed, the value is also in italics. If it is parametrized, the other allowed values are shown in italics.</p>
</li>
<li>
<p><code>&lt;fileNameStem&gt;-full.md</code>: This Markdown file is intended for security teams requiring more details about the Assignments and Policies. It displays the same information as the summary plus the additional details equivalent to <code>&lt;fileNameStem&gt;-full.csv</code>. The Policies are sorted by <code>category</code> and <code>displayName</code>. Each <code>environmentCategory</code> column shows the current enforcement level in bold. If the value is fixed, the value is also in italics. If it is parametrized, the other allowed values are shown in italics. The additional details are:</p>
</li>
<li>Group Names</li>
<li>
<p>Effects per <code>environmentCategory</code> and Policy Set with additional details on the origin of the effect.</p>
</li>
<li>
<p><code>Folder: services</code>: Individual Markdown files generated off of the main Policy Assignment Markdown file. These files are based on each "Service Category" and can be used as sub-pages with Azure DevOps Wiki pages.</p>
</li>
</ul>
<h2 id="policy-set-documentation">Policy Set Documentation</h2>
<p>Compares multiple Policy Set definitions for Policy and effect overlap as Markdown and Excel (<code>.csv</code>) files.</p>
<h3 id="element-documentpolicysets">Element <code>documentPolicySets</code></h3>
<ul>
<li><code>pacEnvironment</code>: references the Policy as Code environment in <code>global-settings.jsonc</code> defining the tenant and root scope where the Policy and Policy Set definitions are deployed.</li>
<li><code>fileNameStem</code>: the file name without the extension (.md, .csv, .jsonc)</li>
<li><code>title</code>: Heading 1 text for Markdown.</li>
<li><code>policySets</code>: list Policy Sets (<code>id</code>) to be compared and included in the parameter JSON file. The <code>shortName</code> is used for column headings.</li>
<li><code>environmentColumnsInCsv</code>: list of columns to generate a parameter file starter equivalent to <code>&lt;fileNameStem&gt;-parameters.csv</code> above in the assignment documentation section.</li>
</ul>
<h3 id="output-files_1">Output files</h3>
<ul>
<li>
<p><code>&lt;fileNameStem&gt;-full.md</code>: Markdown file with Policies sorted by Policy category and display name with effect columns for each Initiative.</p>
</li>
<li>
<p>Each effect column starts with the bolded display Name followed by the description and lines grouped by bolded Initiative short name with the effect parameter name in italics and the group names in normal text.</p>
</li>
<li>
<p>The text below the description contains details on parameters and group names for each initiative.</p>
</li>
<li>
<p><code>&lt;fileNameStem&gt;-full.csv</code>: Excel file with the same information as the Markdown file.</p>
</li>
<li><code>&lt;fileNameStem&gt;-parameters.csv</code>: Excel parameter file starter equivalent to <code>&lt;fileNameStem&gt;-parameters.csv</code> above in the assignment documentation section.</li>
<li><code>&lt;fileNameStem&gt;.jsonc</code>: Parameter file starter in JSON format to simplify parameter settings for Assignments (traditional approach).</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.indexes", {"navigation.sections": {"level": 1}}, "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>